<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.css"
            integrity="sha384-zh0CIslj+VczCZtlzBcjt5ppRcsAmDnRem7ESsYwWwg3m/OaJ2l4x7YBZl9Kxxib"
            crossorigin="anonymous"
        />
        <script src="https://benrosenberg.info/posts/CSCI-260-notes/meta/math.js"></script>
        <script
            defer
            src="https://cdn.jsdelivr.net/npm/katex@0.16.21/dist/katex.min.js"
            integrity="sha384-Rma6DA2IPUwhNxmrB/7S3Tno0YY7sFu9WSYMCuulLhIqYSGZ2gKCJWIqhBWqMQfh"
            crossorigin="anonymous"
            onload="render_katex_math()"
        ></script>
        <link
            rel="stylesheet"
            disabled=""
            title="hljs-light"
            href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs.min.css"
        />
        <link
            rel="stylesheet"
            title="hljs-dark"
            href="https://benrosenberg.info/posts/CSCI-260-notes/meta/hljs-gruvbox-dark.css"
        />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
        <script src="//unpkg.com/@highlightjs/cdn-assets@11.5.1/languages/cpp.min.js"></script>
        <script src="//unpkg.com/@highlightjs/cdn-assets@11.5.1/languages/python.min.js"></script>
        <script src="//unpkg.com/@highlightjs/cdn-assets@11.5.1/languages/mipsasm.min.js"></script>
        <script src="//unpkg.com/@highlightjs/cdn-assets@11.5.1/languages/latex.min.js"></script>
        <title>Lecture 12</title>
        <link rel="stylesheet" href="https://benrosenberg.info/posts/CSCI-260-notes/meta/style.css" />
        <link rel="icon" type="image/png" href="https://benrosenberg.info/posts/CSCI-260-notes/images/favicon.png">
    </head>
    <body>
        <span style="display: none" id="SITE_ROOT_TAG">https://benrosenberg.info/posts/CSCI-260-notes</span>
        <!-- Popout menu -->
        <nav class="menu" id="menu">
            <div class="menu-header">
                <h2><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 01.html">CSCI 260 Notes</a></h2>
            </div>
            <div class="menu-content">
                <ul><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 01.html">Lecture 01</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 02.html">Lecture 02</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 03.html">Lecture 03</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 04.html">Lecture 04</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 05.html">Lecture 05</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 06.html">Lecture 06</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 07.html">Lecture 07</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 08.html">Lecture 08</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 09.html">Lecture 09</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 10.html">Lecture 10</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 11.html">Lecture 11</a><li class="currentpage"><a class="currentpage" href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 12.html">Lecture 12</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 13.html">Lecture 13</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 14.html">Lecture 14</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 15.html">Lecture 15</a><li><a href="https://benrosenberg.info/posts/CSCI-260-notes/html/Lecture 16.html">Lecture 16</a></ul>
            </div>
            <div class="menu-footer">
                <!-- <p>Menu Footer</p> -->
                <p>
                    <span class="theme-toggle"
                        ><button
                            class="theme-toggle-button"
                            onclick="toggleColorMode();"
                        >
                            switch theme
                        </button></span
                    >
                </p>
            </div>
        </nav>

        <!-- Main content area -->
        <div class="main-wrapper" id="main">
            <!-- Hamburger menu button -->
            <button class="hamburger" id="hamburger">â˜°</button>
            <div class="main"><h1>MIPS assembly - Loops and Conditionals (jumps and branches)</h1>
<h2>Jump instruction - <code>j</code> - &quot;unconditional&quot;</h2>
<pre><code class="language-mips">j LABEL # jump to LABEL
</code></pre>
<h4>Example 1: Infinite loop</h4>
<pre><code class="language-mips">L1: add $s0, $s1, $s2
    add $s3, $s4, $s5
    j L1
</code></pre>
<ul>
<li>After a jump instruction, the next one to execute is the labeled one.</li>
<li>The jump instruction places the address of the labeled instruction into the program counter.</li>
<li>Labels exist in Assembly code only - when assembled, labels are replaced with the address of the labeled instruction.</li>
</ul>
<h2>Conditionals/branching - <code>BEQ</code> and <code>BNE</code></h2>
<pre><code class="language-mips">BEQ $t0, $t1, LABEL # &quot;branch on equal&quot; - if t0 = t1, then go to LABEL
BNE $t0, $t1, LABEL # &quot;branch on not equal&quot; - if t0 != t1, then go to LABEL
</code></pre>
<p>Only jump to label if condition is satisfied.</p>
<h4>Example 2: Convert the following C++ code to MIPS</h4>
<pre><code class="language-cpp">for (int i = 0; i != 10; i++)
    // a is an int with value in $s0
    // keep a in $s0
    a++;
</code></pre>
<hr />
<p>Answer:</p>
<p>We know we can translate <code>a++</code> like this:</p>
<pre><code class="language-mips">addi $s0, $s0, 1 # a++
</code></pre>
<p>Now we need to do the rest of the for-loop:</p>
<pre><code class="language-mips">        addi $t7, $zero, 0 # t7 has the value of i
        addi $t6, $zero, 10 # put 10 in t6
START:  beq $t7, $t6, EXIT # check loop condition
        addi $s0, $s0, 1 # a++ - loop body
        addi $t7, $t7, 1 # i++
        j START # back to loop start
EXIT:   ... # no need to fill in anything after EXIT label
</code></pre>
<h2>Conditionals - <code>SLT</code>, <code>SLTI</code>, <code>SLTU</code>, and <code>SLTIU</code> instructions</h2>
<p><code>SLT</code> stands for &quot;set on less than&quot;:</p>
<ul>
<li>&quot;setting&quot; a register means setting it to 1</li>
<li>&quot;clearing&quot; a register means setting it to 0</li>
</ul>
<pre><code class="language-mips">slt     $t0, $t1, $t2   # is t1 &lt; t2 true?
slti    $t0, $t1, 234   # is t1 &lt; 234 true?
sltu    $t0, $t1, $t2   # unsigned ver. of slt
sltiu   $t0, $t1, 234   # unsigned ver. of slti
</code></pre>
<p>For <code>sltu</code> and <code>sltiu</code>, the comparisons are <strong>unsigned</strong> - treat values of <code>$t1</code> and <code>$t2</code> as unsigned integers when doing comparison.</p>
<p><em>Note: there is no &quot;greater-than&quot; instruction, everything can be done with <code>beq</code>/<code>bne</code> and <code>slt</code> and friends.</em></p>
<h4>Example 3: Convert the following C++ code to MIPS</h4>
<pre><code class="language-cpp">if (var &lt; 10)
    var++; // value of var is in $s6
</code></pre>
<hr />
<p>Answer:</p>
<p>We know we can translate <code>var++</code> like this:</p>
<pre><code class="language-mips">addi $s6, $s6, 1 # var++
</code></pre>
<p>Conditional:</p>
<pre><code class="language-mips">slti $t7, $s6, 10 # var &lt; 10? if so put 1 in t7
beq $t7, $zero, EXIT # if var not &lt; 10, skip
addi $s6, $s6, 1 # var++
EXIT:
</code></pre>
<h4>Example 3: Convert the following C++ code to MIPS</h4>
<pre><code class="language-cpp">// value of a is in s6
// value of var is in s2
if (10 &lt; a)
    var++;
</code></pre>
<hr />
<p>Answer:</p>
<pre><code class="language-mips">addi $s0, $zero, 10 # put 10 in s0
slt $s1, $s0, $s6 # 10 &lt; a?
beq $s1, $zero, EXIT # exit if 10 not &lt; a
addi $s2, $s2, 1 # var++
EXIT:
</code></pre>
</div>
        </div>

        <footer class="footer" id="mainfooter">
            <p
                xmlns:cc="http://creativecommons.org/ns#"
                xmlns:dct="http://purl.org/dc/terms/"
            >
                <a
                    property="dct:title"
                    rel="cc:attributionURL"
                    href="https://benrosenberg.info"
                    class="link-problem"
                    >benrosenberg.info</a
                >
                by <span property="cc:attributionName">Ben Rosenberg</span> is
                licensed under
                <a
                    href="https://creativecommons.org/licenses/by/4.0/?ref=chooser-v1"
                    target="_blank"
                    rel="license noopener noreferrer"
                    style="display: inline-block"
                    class="link-problem"
                    >CC BY 4.0<img
                        class="cc-svg"
                        style="
                            height: 20px !important;
                            margin-left: 3px;
                            vertical-align: middle;
                        "
                        src="https://benrosenberg.info/posts/CSCI-260-notes/images/cc_dark.svg"
                        alt="" /><img
                        class="by-svg"
                        style="
                            height: 20px !important;
                            margin-left: 3px;
                            vertical-align: middle;
                        "
                        src="https://benrosenberg.info/posts/CSCI-260-notes/images/by_dark.svg"
                        alt=""
                /></a>
            </p>
        </footer>
        <script src="https://benrosenberg.info/posts/CSCI-260-notes/meta/menu.js"></script>
        <script src="https://benrosenberg.info/posts/CSCI-260-notes/meta/theme.js"></script>
        <script>
            window.onload = function () {
                hljs.highlightAll();
            };
        </script>
    </body>
</html>
